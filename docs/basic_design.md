# お買い物エージェント 基本設計書

## 1. システム全体構成

- Webアプリケーションとして提供
- フロントエンド（ユーザーインターフェース）とバックエンド（エージェント群）で構成
- バックエンドはADKを用いて各エージェントを実装
- バックエンドはGoogle Cloud Run上で稼働
- 自然言語処理・会話生成・要約にはVertex AI（LLM）を利用
- Web検索にはGoogle Custom Search APIを利用
- 商品情報取得には楽天API、Amazon Product Advertising APIも利用可能性あり

## 2. 各エージェントの入出力（インターフェース）概要

### 2.1 会話管理エージェント
- 入力：ユーザーからの発話テキスト
- 出力：次の質問、検索結果の提示、追加質問などのテキスト
- 呼び出し：ユーザー希望管理エージェント、商品検索エージェント、検索結果集約エージェント

### 2.2 ユーザー希望管理エージェント
- 入力：ユーザーの発話から抽出した希望条件
- 出力：構造化された希望条件データ

### 2.3 商品検索エージェント
- 入力：ユーザー希望条件データ
- 出力：商品情報リスト（価格、機能、画像、URL等）

### 2.4 検索結果集約エージェント
- 入力：複数サイトからの生商品情報リスト
- 出力：絞り込み・比較済みの商品リスト

## 3. データフロー

1. ユーザーが欲しい商品を入力
2. 会話管理エージェントが希望条件をヒアリング
3. ユーザー希望管理エージェントが条件を整理
4. 商品検索エージェントがWeb/API検索を実施
5. 検索結果集約エージェントが情報をまとめる
6. 会話管理エージェントが結果をユーザーに提示

## 4. 主要な画面・UIイメージ（テキスト）

- トップ画面：
  - 「どんな商品をお探しですか？」と入力欄
- 会話画面：
  - ユーザーとエージェントのチャット形式
  - 商品候補のリスト表示（画像・価格・リンク付き）
  - 追加質問や絞り込み提案の表示

## 5. 使用技術・外部サービス

- バックエンド：Python、ADK、Google Cloud Run
- フロントエンド：HTML/CSS/JavaScript（必要に応じてReact等）
- AIサービス：Vertex AI（LLM）
- Web検索：Google Custom Search API
- 商品情報取得：楽天API、Amazon Product Advertising API（利用可能性あり）
- データ管理：セッション管理のみ（DB不要）

## 6. 構成イメージ（テキスト説明）
- フロントエンド（Web UI）からCloud Run上のバックエンド（エージェント群）にリクエスト
- バックエンドはVertex AIで自然言語処理・要約を実施
- 商品検索時はGoogle Custom Search APIや楽天・Amazon APIを呼び出し
- 検索結果を集約・要約し、フロントエンドに返却 